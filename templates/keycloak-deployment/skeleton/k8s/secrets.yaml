apiVersion: v1
kind: Secret
metadata:
  name: keycloak-admin-creds
  namespace: ${{ values.namespace }}
  labels:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: ${{ values.name }}
type: Opaque
stringData:
  username: ${{ values.adminUser }}
  password: "CHANGE_ME_AFTER_DEPLOYMENT"

---
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-db-creds
  namespace: ${{ values.namespace }}
  labels:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: ${{ values.name }}
type: Opaque
stringData:
  username: keycloak
  password: "CHANGE_ME_AFTER_DEPLOYMENT"
  database: keycloak
  {% if values.databaseType == "postgresql" %}
  jdbc-url: "jdbc:postgresql://postgresql:5432/keycloak"
  {% elif values.databaseType == "mysql" %}
  jdbc-url: "jdbc:mysql://mysql:3306/keycloak"
  {% elif values.databaseType == "mariadb" %}
  jdbc-url: "jdbc:mariadb://mariadb:3306/keycloak"
  {% endif %}

---
{% if values.enableVault %}
apiVersion: v1
kind: Secret
metadata:
  name: vault-auth
  namespace: ${{ values.namespace }}
  labels:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: ${{ values.name }}
type: Opaque
stringData:
  vault-token: "VAULT_TOKEN_HERE"
  vault-url: "https://vault.example.com"
  vault-path: "secret/keycloak"
{% endif %}

---
{% if values.enableLDAP %}
apiVersion: v1
kind: Secret
metadata:
  name: ldap-config
  namespace: ${{ values.namespace }}
  labels:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: ${{ values.name }}
type: Opaque
stringData:
  ldap-url: "ldap://ldap.example.com:389"
  bind-dn: "cn=admin,dc=example,dc=com"
  bind-password: "LDAP_BIND_PASSWORD"
  users-dn: "ou=users,dc=example,dc=com"
  groups-dn: "ou=groups,dc=example,dc=com"
{% endif %}

---
{% if values.enableSocialLogin %}
apiVersion: v1
kind: Secret
metadata:
  name: social-login-config
  namespace: ${{ values.namespace }}
  labels:
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/instance: ${{ values.name }}
type: Opaque
stringData:
  google-client-id: "GOOGLE_CLIENT_ID"
  google-client-secret: "GOOGLE_CLIENT_SECRET"
  github-client-id: "GITHUB_CLIENT_ID"
  github-client-secret: "GITHUB_CLIENT_SECRET"
  facebook-client-id: "FACEBOOK_CLIENT_ID"
  facebook-client-secret: "FACEBOOK_CLIENT_SECRET"
{% endif %}