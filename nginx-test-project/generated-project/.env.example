# NGINX Web Service Environment Configuration
# Copy this file to .env and update the values

# Service Configuration
SERVICE_NAME=${{ values.name }}
NGINX_VERSION=${{ values.nginxVersion }}
NGINX_PORT=${{ values.port }}
REPLICAS=${{ values.replicas }}

# Domain Configuration
{% if values.domain %}
DOMAIN=${{ values.domain }}
{% if values.additionalDomains %}
ADDITIONAL_DOMAINS={{ values.additionalDomains | join(",") }}
{% endif %}
{% else %}
# DOMAIN=your-domain.com
# ADDITIONAL_DOMAINS=www.your-domain.com,alt.your-domain.com
{% endif %}

# SSL/TLS Configuration
{% if values.enableSSL %}
ENABLE_SSL=true
SSL_PROVIDER=${{ values.sslProvider }}
{% else %}
ENABLE_SSL=false
# SSL_PROVIDER=cert-manager
{% endif %}

# Performance Configuration
{% if values.enableCaching %}
ENABLE_CACHING=true
CACHE_SIZE=${{ values.cacheSize }}
{% else %}
ENABLE_CACHING=false
# CACHE_SIZE=100m
{% endif %}

{% if values.enableGzip %}
ENABLE_GZIP=true
{% else %}
ENABLE_GZIP=false
{% endif %}

{% if values.enableBrotli %}
ENABLE_BROTLI=true
{% else %}
ENABLE_BROTLI=false
{% endif %}

# Security Configuration
{% if values.enableBasicAuth %}
ENABLE_BASIC_AUTH=true
BASIC_AUTH_USER=admin
BASIC_AUTH_PASSWORD=change-this-password
{% else %}
ENABLE_BASIC_AUTH=false
# BASIC_AUTH_USER=admin
# BASIC_AUTH_PASSWORD=secure-password
{% endif %}

{% if values.allowedIPs %}
ALLOWED_IPS={{ values.allowedIPs | join(",") }}
{% else %}
# ALLOWED_IPS=192.168.1.0/24,10.0.0.0/8
{% endif %}

{% if values.enableRateLimit %}
ENABLE_RATE_LIMIT=true
RATE_LIMIT_RPM=${{ values.rateLimitRpm }}
{% else %}
ENABLE_RATE_LIMIT=false
# RATE_LIMIT_RPM=60
{% endif %}

# Monitoring Configuration
{% if values.enableMonitoring %}
ENABLE_MONITORING=true
{% else %}
ENABLE_MONITORING=false
{% endif %}

# Logging Configuration
{% if values.enableAccessLogs %}
ENABLE_ACCESS_LOGS=true
LOG_FORMAT=${{ values.logFormat }}
{% else %}
ENABLE_ACCESS_LOGS=false
# LOG_FORMAT=combined
{% endif %}

# Content Configuration
CONTENT_SOURCE=${{ values.contentSource }}
{% if values.gitRepo %}
GIT_REPO=${{ values.gitRepo }}
CONTENT_PATH=${{ values.contentPath }}
{% else %}
# GIT_REPO=https://github.com/user/content-repo.git
# CONTENT_PATH=/
{% endif %}

# Error Pages
{% if values.enableErrorPages %}
ENABLE_ERROR_PAGES=true
{% else %}
ENABLE_ERROR_PAGES=false
{% endif %}

# Kubernetes Configuration
NAMESPACE=${{ values.namespace }}
INGRESS_CLASS=${{ values.ingressClass }}
STORAGE_CLASS=${{ values.storageClass }}

# Network Configuration
NETWORK_NAME=web-network
NETWORK_SUBNET=172.21.0.0/16

# Worker Configuration
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024

# Timeouts
CLIENT_BODY_TIMEOUT=12
CLIENT_HEADER_TIMEOUT=12
SEND_TIMEOUT=10
KEEPALIVE_TIMEOUT=65